[debug] [2024-02-01T21:51:38.789Z] ----------------------------------------------------------------------
[debug] [2024-02-01T21:51:38.790Z] Command:       /Users/sire/.nvm/versions/node/v18.17.0/bin/node /Users/sire/.nvm/versions/node/v18.17.0/bin/firebase deploy --only functions
[debug] [2024-02-01T21:51:38.790Z] CLI Version:   13.1.0
[debug] [2024-02-01T21:51:38.790Z] Platform:      darwin
[debug] [2024-02-01T21:51:38.790Z] Node Version:  v18.17.0
[debug] [2024-02-01T21:51:38.796Z] Time:          Thu Feb 01 2024 22:51:38 GMT+0100 (GMT+01:00)
[debug] [2024-02-01T21:51:38.796Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-02-01T21:51:38.797Z] >>> [apiv2][query] GET https://firebase-public.firebaseio.com/cli.json [none]
[debug] [2024-02-01T21:51:38.851Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-02-01T21:51:38.851Z] > authorizing via signed-in user (bartholomewfavour1995@gmail.com)
[debug] [2024-02-01T21:51:38.851Z] [iam] checking project i-get-am for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2024-02-01T21:51:38.852Z] > refreshing access token with scopes: []
[debug] [2024-02-01T21:51:38.852Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2024-02-01T21:51:38.852Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2024-02-01T21:51:39.425Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2024-02-01T21:51:39.426Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2024-02-01T21:51:39.441Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/i-get-am:testIamPermissions [none]
[debug] [2024-02-01T21:51:39.441Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/i-get-am:testIamPermissions x-goog-quota-user=projects/i-get-am
[debug] [2024-02-01T21:51:39.442Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/i-get-am:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-02-01T21:51:40.303Z] <<< [apiv2][status] GET https://firebase-public.firebaseio.com/cli.json 200
[debug] [2024-02-01T21:51:40.303Z] <<< [apiv2][body] GET https://firebase-public.firebaseio.com/cli.json {"cloudBuildErrorAfter":1594252800000,"cloudBuildWarnAfter":1590019200000,"defaultNode10After":1594252800000,"minVersion":"3.0.5","node8DeploysDisabledAfter":1613390400000,"node8RuntimeDisabledAfter":1615809600000,"node8WarnAfter":1600128000000}
[debug] [2024-02-01T21:51:40.695Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/i-get-am:testIamPermissions 200
[debug] [2024-02-01T21:51:40.695Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/i-get-am:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-02-01T21:51:40.695Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/i-get-am/serviceAccounts/i-get-am@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2024-02-01T21:51:40.695Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/i-get-am/serviceAccounts/i-get-am@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2024-02-01T21:51:42.099Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/i-get-am/serviceAccounts/i-get-am@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2024-02-01T21:51:42.099Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/i-get-am/serviceAccounts/i-get-am@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'i-get-am'...
[info] 
[info] i  deploying functions 
[debug] [2024-02-01T21:51:42.104Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/i-get-am [none]
[debug] [2024-02-01T21:51:42.790Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/i-get-am 200
[debug] [2024-02-01T21:51:42.790Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/i-get-am {"projectId":"i-get-am","projectNumber":"643431621926","displayName":"I get am","name":"projects/i-get-am","resources":{"hostingSite":"i-get-am","realtimeDatabaseInstance":"i-get-am-default-rtdb","storageBucket":"i-get-am.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_7176f124-64f1-404c-9187-fa00350a5fea"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2024-02-01T21:51:42.791Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/cloudfunctions.googleapis.com [none]
[debug] [2024-02-01T21:51:42.791Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/i-get-am
[debug] [2024-02-01T21:51:42.791Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/runtimeconfig.googleapis.com [none]
[debug] [2024-02-01T21:51:42.791Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/i-get-am
[debug] [2024-02-01T21:51:42.792Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/cloudbuild.googleapis.com [none]
[debug] [2024-02-01T21:51:42.792Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/cloudbuild.googleapis.com x-goog-quota-user=projects/i-get-am
[debug] [2024-02-01T21:51:42.792Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/artifactregistry.googleapis.com [none]
[debug] [2024-02-01T21:51:42.792Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/artifactregistry.googleapis.com x-goog-quota-user=projects/i-get-am
[debug] [2024-02-01T21:51:44.286Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/cloudbuild.googleapis.com 200
[debug] [2024-02-01T21:51:44.286Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2024-02-01T21:51:44.288Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/artifactregistry.googleapis.com 200
[debug] [2024-02-01T21:51:44.288Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2024-02-01T21:51:44.289Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/runtimeconfig.googleapis.com 200
[debug] [2024-02-01T21:51:44.289Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/runtimeconfig.googleapis.com [omitted]
[debug] [2024-02-01T21:51:44.452Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/cloudfunctions.googleapis.com 200
[debug] [2024-02-01T21:51:44.453Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2024-02-01T21:51:44.454Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/i-get-am/adminSdkConfig [none]
[debug] [2024-02-01T21:51:45.501Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/i-get-am/adminSdkConfig 200
[debug] [2024-02-01T21:51:45.501Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/i-get-am/adminSdkConfig {"projectId":"i-get-am","databaseURL":"https://i-get-am-default-rtdb.firebaseio.com","storageBucket":"i-get-am.appspot.com","locationId":"us-central"}
[debug] [2024-02-01T21:51:45.501Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/i-get-am/configs [none]
[debug] [2024-02-01T21:51:46.305Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/i-get-am/configs 200
[debug] [2024-02-01T21:51:46.305Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/i-get-am/configs {}
[debug] [2024-02-01T21:51:46.307Z] Validating nodejs source
[debug] [2024-02-01T21:51:46.891Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "form-data": "^4.0.0",
    "handlebars": "^4.7.8",
    "mailgun.js": "^10.0.1",
    "node-mailjet": "^6.0.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2024-02-01T21:51:46.891Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2024-02-01T21:51:46.892Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-02-01T21:51:46.898Z] Found firebase-functions binary at '/Users/sire/Code/market-item-finder/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8331

[debug] [2024-02-01T21:51:47.294Z] Got response from /__/functions.yaml {"endpoints":{"welcomeEmail":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"users/{userId}"},"retry":false},"entryPoint":"welcomeEmail"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /Users/sire/Code/market-item-finder/functions (69.16 KB) for uploading 
[debug] [2024-02-01T21:51:47.322Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/i-get-am/locations/-/functions [none]
[debug] [2024-02-01T21:51:48.622Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/i-get-am/locations/-/functions 200
[debug] [2024-02-01T21:51:48.622Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/i-get-am/locations/-/functions {}
[debug] [2024-02-01T21:51:48.623Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/i-get-am/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2024-02-01T21:51:49.927Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/i-get-am/locations/-/functions 200
[debug] [2024-02-01T21:51:49.927Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/i-get-am/locations/-/functions {}
[debug] [2024-02-01T21:51:49.928Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/i-get-am/databases/(default) [none]
[debug] [2024-02-01T21:51:51.600Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/i-get-am/databases/(default) 200
[debug] [2024-02-01T21:51:51.600Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/i-get-am/databases/(default) {"name":"projects/i-get-am/databases/(default)","uid":"13f98f6d-56f9-44d3-b669-df85f8c74d57","createTime":"2023-08-20T12:01:41.885602Z","updateTime":"2023-08-20T12:01:41.885602Z","locationId":"nam5","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2024-02-01T20:51:51.725283Z","appEngineIntegrationMode":"DISABLED","keyPrefix":"s","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","etag":"IMWwrYaQi4QDMIHtmqyJ5IMD"}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[debug] [2024-02-01T21:51:51.605Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/run.googleapis.com [none]
[debug] [2024-02-01T21:51:51.605Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/run.googleapis.com x-goog-quota-user=projects/i-get-am
[debug] [2024-02-01T21:51:51.608Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/eventarc.googleapis.com [none]
[debug] [2024-02-01T21:51:51.608Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/eventarc.googleapis.com x-goog-quota-user=projects/i-get-am
[debug] [2024-02-01T21:51:51.611Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/pubsub.googleapis.com [none]
[debug] [2024-02-01T21:51:51.611Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/pubsub.googleapis.com x-goog-quota-user=projects/i-get-am
[debug] [2024-02-01T21:51:51.614Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/storage.googleapis.com [none]
[debug] [2024-02-01T21:51:51.614Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/storage.googleapis.com x-goog-quota-user=projects/i-get-am
[debug] [2024-02-01T21:51:52.920Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/run.googleapis.com 200
[debug] [2024-02-01T21:51:52.920Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/run.googleapis.com [omitted]
[info] ✔  functions: required API run.googleapis.com is enabled 
[debug] [2024-02-01T21:51:52.976Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/storage.googleapis.com 200
[debug] [2024-02-01T21:51:52.976Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/storage.googleapis.com [omitted]
[info] ✔  functions: required API storage.googleapis.com is enabled 
[debug] [2024-02-01T21:51:52.983Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/pubsub.googleapis.com 200
[debug] [2024-02-01T21:51:52.983Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/pubsub.googleapis.com [omitted]
[info] ✔  functions: required API pubsub.googleapis.com is enabled 
[debug] [2024-02-01T21:51:53.573Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/eventarc.googleapis.com 200
[debug] [2024-02-01T21:51:53.574Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/i-get-am/services/eventarc.googleapis.com [omitted]
[info] ✔  functions: required API eventarc.googleapis.com is enabled 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2024-02-01T21:51:53.576Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/643431621926/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2024-02-01T21:51:53.583Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/643431621926/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2024-02-01T21:51:55.021Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/643431621926/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2024-02-01T21:51:55.022Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/643431621926/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-643431621926@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"109452641926436182403"}}
[debug] [2024-02-01T21:51:55.069Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/643431621926/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2024-02-01T21:51:55.069Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/643431621926/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-643431621926@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"113222799761055873860"}}
[debug] [2024-02-01T21:51:55.074Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/643431621926:getIamPolicy [none]
[debug] [2024-02-01T21:51:56.536Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/643431621926:getIamPolicy 200
[debug] [2024-02-01T21:51:56.536Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/643431621926:getIamPolicy {"version":1,"etag":"BwYQQ0/lZFM=","bindings":[{"role":"roles/cloudbuild.builds.builder","members":["serviceAccount:643431621926@cloudbuild.gserviceaccount.com"]},{"role":"roles/cloudbuild.serviceAgent","members":["serviceAccount:service-643431621926@gcp-sa-cloudbuild.iam.gserviceaccount.com"]},{"role":"roles/cloudfunctions.admin","members":["serviceAccount:firebase-adminsdk-uyc0n@i-get-am.iam.gserviceaccount.com"]},{"role":"roles/cloudfunctions.serviceAgent","members":["serviceAccount:service-643431621926@gcf-admin-robot.iam.gserviceaccount.com"]},{"role":"roles/containerregistry.ServiceAgent","members":["serviceAccount:service-643431621926@containerregistry.iam.gserviceaccount.com"]},{"role":"roles/editor","members":["serviceAccount:643431621926-compute@developer.gserviceaccount.com","serviceAccount:i-get-am@appspot.gserviceaccount.com"]},{"role":"roles/eventarc.eventReceiver","members":["serviceAccount:643431621926-compute@developer.gserviceaccount.com"]},{"role":"roles/eventarc.serviceAgent","members":["serviceAccount:service-643431621926@gcp-sa-eventarc.iam.gserviceaccount.com"]},{"role":"roles/firebase.managementServiceAgent","members":["serviceAccount:firebase-service-account@firebase-sa-management.iam.gserviceaccount.com","serviceAccount:service-643431621926@gcp-sa-firebase.iam.gserviceaccount.com"]},{"role":"roles/firebase.sdkAdminServiceAgent","members":["serviceAccount:firebase-adminsdk-uyc0n@i-get-am.iam.gserviceaccount.com"]},{"role":"roles/firebaseauth.admin","members":["serviceAccount:firebase-adminsdk-uyc0n@i-get-am.iam.gserviceaccount.com"]},{"role":"roles/firebasedatabase.admin","members":["serviceAccount:firebase-adminsdk-uyc0n@i-get-am.iam.gserviceaccount.com"]},{"role":"roles/firebaserules.system","members":["serviceAccount:service-643431621926@firebase-rules.iam.gserviceaccount.com"]},{"role":"roles/firebasestorage.serviceAgent","members":["serviceAccount:service-643431621926@gcp-sa-firebasestorage.iam.gserviceaccount.com"]},{"role":"roles/firestore.serviceAgent","members":["serviceAccount:service-643431621926@gcp-sa-firestore.iam.gserviceaccount.com"]},{"role":"roles/iam.serviceAccountTokenCreator","members":["serviceAccount:firebase-adminsdk-uyc0n@i-get-am.iam.gserviceaccount.com","serviceAccount:service-643431621926@gcp-sa-pubsub.iam.gserviceaccount.com"]},{"role":"roles/owner","members":["user:bartholomewfavour1995@gmail.com"]},{"role":"roles/pubsub.serviceAgent","members":["serviceAccount:service-643431621926@gcp-sa-pubsub.iam.gserviceaccount.com"]},{"role":"roles/run.invoker","members":["serviceAccount:643431621926-compute@developer.gserviceaccount.com"]},{"role":"roles/run.serviceAgent","members":["serviceAccount:service-643431621926@serverless-robot-prod.iam.gserviceaccount.com"]},{"role":"roles/storage.admin","members":["serviceAccount:firebase-adminsdk-uyc0n@i-get-am.iam.gserviceaccount.com"]}]}
[debug] [2024-02-01T21:51:56.538Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/i-get-am [none]
[debug] [2024-02-01T21:51:57.248Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/i-get-am 200
[debug] [2024-02-01T21:51:57.248Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/i-get-am {"projectId":"i-get-am","projectNumber":"643431621926","displayName":"I get am","name":"projects/i-get-am","resources":{"hostingSite":"i-get-am","realtimeDatabaseInstance":"i-get-am-default-rtdb","storageBucket":"i-get-am.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_7176f124-64f1-404c-9187-fa00350a5fea"}
[debug] [2024-02-01T21:51:57.251Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/i-get-am/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2024-02-01T21:51:58.382Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/i-get-am/locations/us-central1/functions:generateUploadUrl 200
[debug] [2024-02-01T21:51:58.383Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/i-get-am/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-643431621926-us-central1/7c3799de-29d6-4646-9f74-59dcae9542e6.zip?GoogleAccessId=service-643431621926@gcf-admin-robot.iam.gserviceaccount.com&Expires=1706826118&Signature=Qfjyer51CRuoUr58wTCHtNhi2scEj1Z7K4jjO%2Bs9P5tSMg%2BIYhYHqfXdkiFv0%2BLwrmlVMIG8dl5huE9h79QQiuYkoExtDqgiJCxlmeV4HMvykRg7y%2Fu0LveRf9XE9wJ8c%2Fdt7L8WGw41tc%2FeBd46iw9ZKZv57E4hCWFbaZgKeLgea18IxTAIZBce%2Fku7xDpmkgdu4ld0RYfQ16nDfHlHKGF0jIAos952rA7yJh0IWEwL%2B%2FFcMLTx6HzpeWmysSlGgqG%2B2wmjUZNGe%2BK3aNsUO95uMGQSNJnGA2aeWhw9T2%2B8uCjEYPiNWtsH6%2BBx9e%2FQrS0tJuNDxntGTAEn5bAynA%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-643431621926-us-central1","object":"7c3799de-29d6-4646-9f74-59dcae9542e6.zip"}}
[debug] [2024-02-01T21:51:58.386Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-643431621926-us-central1/7c3799de-29d6-4646-9f74-59dcae9542e6.zip GoogleAccessId=service-643431621926%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1706826118&Signature=Qfjyer51CRuoUr58wTCHtNhi2scEj1Z7K4jjO%2Bs9P5tSMg%2BIYhYHqfXdkiFv0%2BLwrmlVMIG8dl5huE9h79QQiuYkoExtDqgiJCxlmeV4HMvykRg7y%2Fu0LveRf9XE9wJ8c%2Fdt7L8WGw41tc%2FeBd46iw9ZKZv57E4hCWFbaZgKeLgea18IxTAIZBce%2Fku7xDpmkgdu4ld0RYfQ16nDfHlHKGF0jIAos952rA7yJh0IWEwL%2B%2FFcMLTx6HzpeWmysSlGgqG%2B2wmjUZNGe%2BK3aNsUO95uMGQSNJnGA2aeWhw9T2%2B8uCjEYPiNWtsH6%2BBx9e%2FQrS0tJuNDxntGTAEn5bAynA%3D%3D
[debug] [2024-02-01T21:51:58.386Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-643431621926-us-central1/7c3799de-29d6-4646-9f74-59dcae9542e6.zip [stream]
[debug] [2024-02-01T21:51:59.723Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-643431621926-us-central1/7c3799de-29d6-4646-9f74-59dcae9542e6.zip 200
[debug] [2024-02-01T21:51:59.723Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-643431621926-us-central1/7c3799de-29d6-4646-9f74-59dcae9542e6.zip [omitted]
[info] ✔  functions: functions folder uploaded successfully 
[info] i  functions: creating Node.js 18 (2nd Gen) function welcomeEmail(us-central1)... 
[debug] [2024-02-01T21:51:59.742Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/i-get-am/locations/us-central1/functions functionId=welcomeEmail
[debug] [2024-02-01T21:51:59.742Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/i-get-am/locations/us-central1/functions {"name":"projects/i-get-am/locations/us-central1/functions/welcomeEmail","buildConfig":{"runtime":"nodejs18","entryPoint":"welcomeEmail","source":{"storageSource":{"bucket":"gcf-v2-uploads-643431621926-us-central1","object":"7c3799de-29d6-4646-9f74-59dcae9542e6.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"i-get-am\",\"databaseURL\":\"https://i-get-am-default-rtdb.firebaseio.com\",\"storageBucket\":\"i-get-am.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"i-get-am","EVENTARC_CLOUD_EVENT_SOURCE":"projects/i-get-am/locations/us-central1/services/welcomeEmail","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"welcomeEmail"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"5b941daed88987065f91e0f3c43dbb2492fe4eac"},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}","operator":"match-path-pattern"}],"triggerRegion":"nam5"}}
[debug] [2024-02-01T21:52:01.982Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/i-get-am/locations/us-central1/functions 400
[debug] [2024-02-01T21:52:01.982Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/i-get-am/locations/us-central1/functions {"error":{"code":400,"message":"Could not create Cloud Run service welcomeemail. spec.template.spec.containers.resources.limits.cpu: Invalid value specified for cpu. For the specified value, maxScale may not exceed 10.\nConsider running your workload in a region with greater capacity, decreasing your requested cpu-per-instance, or requesting an increase in quota for this region if you are seeing sustained usage near this limit, see https://cloud.google.com/run/quotas. Your project may gain access to further scaling by adding billing information to your account.","status":"INVALID_ARGUMENT"}}
[warn] ⚠  functions: Your current project quotas don't allow for the current max instances setting of 100. Either reduce this function's maximum instances, or request a quota increase on the underlying Cloud Run service at https://cloud.google.com/run/quotas. 
[warn] ⚠  functions: You can adjust the max instances value in your function's runtime options:
	setGlobalOptions({maxInstances: 10}) 
[error] Failed to create function projects/i-get-am/locations/us-central1/functions/welcomeEmail
[debug] [2024-02-01T21:52:01.984Z] Total Function Deployment time: 2255
[debug] [2024-02-01T21:52:01.984Z] 1 Functions Deployed
[debug] [2024-02-01T21:52:01.984Z] 1 Functions Errored
[debug] [2024-02-01T21:52:01.984Z] 0 Function Deployments Aborted
[debug] [2024-02-01T21:52:01.984Z] Average Function Deployment time: 2253
[info] 
[info] Functions deploy had errors with the following functions:
	welcomeEmail(us-central1)
[info] i  functions: cleaning up build files... 
[debug] [2024-02-01T21:52:01.985Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/i-get-am/locations/us-central1/repositories/gcf-artifacts/packages/welcome_email [none]
[debug] [2024-02-01T21:52:01.986Z] >>> [apiv2][query] GET https://us.gcr.io/v2/i-get-am/gcf/us-central1/tags/list [none]
[debug] [2024-02-01T21:52:03.194Z] <<< [apiv2][status] GET https://us.gcr.io/v2/i-get-am/gcf/us-central1/tags/list 404
[debug] [2024-02-01T21:52:03.195Z] <<< [apiv2][body] GET https://us.gcr.io/v2/i-get-am/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-02-01T21:52:03.195Z] Failed docker command with error  HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"HTTP Error: 404, Not Found","status":404}
[debug] [2024-02-01T21:52:03.197Z] >>> [apiv2][query] GET https://us.gcr.io/v2/i-get-am/gcf/us-central1/tags/list [none]
[debug] [2024-02-01T21:52:03.245Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/i-get-am/locations/us-central1/repositories/gcf-artifacts/packages/welcome_email 404
[debug] [2024-02-01T21:52:03.245Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/i-get-am/locations/us-central1/repositories/gcf-artifacts/packages/welcome_email {"error":{"code":404,"message":"Package \"projects/i-get-am/locations/us-central1/repositories/gcf-artifacts/packages/welcome_email\" was not found.","status":"NOT_FOUND"}}
[debug] [2024-02-01T21:52:03.910Z] <<< [apiv2][status] GET https://us.gcr.io/v2/i-get-am/gcf/us-central1/tags/list 404
[debug] [2024-02-01T21:52:03.910Z] <<< [apiv2][body] GET https://us.gcr.io/v2/i-get-am/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-02-01T21:52:03.910Z] Failed docker command with error  HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"HTTP Error: 404, Not Found","status":404}
[debug] [2024-02-01T21:52:04.012Z] >>> [apiv2][query] GET https://us.gcr.io/v2/i-get-am/gcf/us-central1/tags/list [none]
[debug] [2024-02-01T21:52:04.701Z] <<< [apiv2][status] GET https://us.gcr.io/v2/i-get-am/gcf/us-central1/tags/list 404
[debug] [2024-02-01T21:52:04.701Z] <<< [apiv2][body] GET https://us.gcr.io/v2/i-get-am/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2024-02-01T21:52:04.701Z] Failed docker command with error  HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"HTTP Error: 404, Not Found","status":404}
[warn] ⚠  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at https://console.cloud.google.com/gcr/images/i-get-am/us/gcf 
[debug] [2024-02-01T21:52:04.702Z] Functions deploy failed.
[debug] [2024-02-01T21:52:04.702Z] {
  "endpoint": {
    "id": "welcomeEmail",
    "project": "i-get-am",
    "region": "us-central1",
    "entryPoint": "welcomeEmail",
    "platform": "gcfv2",
    "runtime": "nodejs18",
    "eventTrigger": {
      "eventType": "google.cloud.firestore.document.v1.created",
      "retry": false,
      "eventFilters": {
        "database": "(default)",
        "namespace": "(default)"
      },
      "eventFilterPathPatterns": {
        "document": "users/{userId}"
      },
      "region": "nam5"
    },
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "ingressSettings": null,
    "availableMemoryMb": null,
    "serviceAccount": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "concurrency": 80,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"i-get-am\",\"databaseURL\":\"https://i-get-am-default-rtdb.firebaseio.com\",\"storageBucket\":\"i-get-am.appspot.com\",\"locationId\":\"us-central\"}",
      "GCLOUD_PROJECT": "i-get-am",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/i-get-am/locations/us-central1/services/welcomeEmail"
    },
    "codebase": "default",
    "cpu": 1,
    "targetedByOnly": false,
    "hash": "5b941daed88987065f91e0f3c43dbb2492fe4eac"
  },
  "op": "create",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/i-get-am/locations/us-central1/functions/welcomeEmail"
    },
    "exit": 1,
    "message": "Failed to create function projects/i-get-am/locations/us-central1/functions/welcomeEmail",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 400,
            "message": "Could not create Cloud Run service welcomeemail. spec.template.spec.containers.resources.limits.cpu: Invalid value specified for cpu. For the specified value, maxScale may not exceed 10.\nConsider running your workload in a region with greater capacity, decreasing your requested cpu-per-instance, or requesting an increase in quota for this region if you are seeing sustained usage near this limit, see https://cloud.google.com/run/quotas. Your project may gain access to further scaling by adding billing information to your account.",
            "status": "INVALID_ARGUMENT"
          }
        },
        "response": {
          "statusCode": 400
        }
      },
      "exit": 1,
      "message": "HTTP Error: 400, Could not create Cloud Run service welcomeemail. spec.template.spec.containers.resources.limits.cpu: Invalid value specified for cpu. For the specified value, maxScale may not exceed 10.\nConsider running your workload in a region with greater capacity, decreasing your requested cpu-per-instance, or requesting an increase in quota for this region if you are seeing sustained usage near this limit, see https://cloud.google.com/run/quotas. Your project may gain access to further scaling by adding billing information to your account.",
      "status": 400
    },
    "status": 400,
    "code": 400
  }
}
[debug] [2024-02-01T21:52:04.702Z] Error: Failed to create function welcomeEmail in region us-central1
    at /Users/sire/.nvm/versions/node/v18.17.0/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:291:27
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Fabricator.createV2Function (/Users/sire/.nvm/versions/node/v18.17.0/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:277:30)
    at async Fabricator.createEndpoint (/Users/sire/.nvm/versions/node/v18.17.0/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:136:13)
    at async handle (/Users/sire/.nvm/versions/node/v18.17.0/lib/node_modules/firebase-tools/lib/deploy/functions/release/fabricator.js:88:17)
[error] 
[error] Error: There was an error deploying functions
